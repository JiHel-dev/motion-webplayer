$(window).on("load",function(){setTimeout(function(){$("#loadingDiv").fadeOut(200,function(){$("#loadingDiv").hide()})},2E3)});
$(function(){function f(a,c){var b=c-a.toString().length+1;return Array(+(0<b&&b)).join("0")+a}function h(a){a.getFullYear();f(a.getMonth()+1,2);f(a.getDate(),2);var b=f(a.getHours(),2),c=f(a.getMinutes(),2);a=f(a.getSeconds(),2);return b+":"+c+":"+a}FaunUtilityModule.get.timezone();$("#emptyied_bins_indic").remove();$("#collection_time_indic").remove();$("#total_distance_indic").remove();$("#average_speed_indic").remove();$("#max_speed_indic").remove();$("#used_fuel_indic").remove();$.ajax({type:"GET",
url:"https://connect.faun.fr/api/public/user_info",dataType:"json",data:{},headers:{"faun-token":token},success:function(a){FaunUtilityModule.stock.userInfo(a)},error:function(a){console.log(a)}});$.ajax({type:"POST",url:"https://connect.faun.fr/api/public/geolocations_last_auth_vehicles",dataType:"json",data:{timezone:localStorage.timezone},headers:{"faun-token":token},success:function(a){FaunUtilityModule.stock.listAuthorizedVehicle(a)},error:function(a){console.log(a)}});"fr"===localStorage.language?
$("#start-timestamp").datepicker({dateFormat:"yy-mm-dd",minDate:"2018-06-01",maxDate:"2098-06-01",defaultDate:new Date,showWeek:!0,showAnim:"clip",closeText:"Fermer",prevText:"Pr\u00e9c\u00e9dent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:"Janvier F\u00e9vrier Mars Avril Mai Juin Juillet Ao\u00fbt Septembre Octobre Novembre D\u00e9cembre".split(" "),monthNamesShort:"Janv. F\u00e9vr. Mars Avr. Mai Juin Juil. Ao\u00fbt Sept. Oct. Nov. D\u00e9c.".split(" "),dayNames:"Dimanche Lundi Mardi Mercredi Jeudi Vendredi Samedi".split(" "),
dayNamesShort:"Dim. Lun. Mar. Mer. Jeu. Ven. Sam.".split(" "),dayNamesMin:"DLMMJVS".split(""),weekHeader:"Sem.",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",showOtherMonths:!0,selectOtherMonths:!0}):$("#start-timestamp").datepicker({dateFormat:"yy-mm-dd",minDate:"2018-06-01",maxDate:"2098-06-01",defaultDate:new Date,showWeek:!0,showAnim:"clip",firstDay:1,showOtherMonths:!0,selectOtherMonths:!0});$("#start-timestamp").datepicker("setDate",new Date);if(localStorage.selectedVehicletab){var g=
JSON.parse(localStorage.selectedVehicletab).name,e=JSON.parse(localStorage.truckList);for(e.index=0;e.index<e.length;e.index++)g==e[e.index].rcv_number&&(a=e[e.index].vehicle_id);localStorage.selectedVehicletab=JSON.stringify({name:g,id:a})}else var a=0;var c=$("#start-timestamp").val()+" 00:00:00",b=$("#start-timestamp").val()+" 23:59:59";g=Date.parse(c)/1E3;e=Date.parse(b)/1E3;$("#intervalle").html(c+" - "+b);$("#geoloc-slider").slider({range:!0,min:g,max:e,step:900,values:[g,e],slide:function(a,
b){var c=new Date(1E3*b.values[0]),d=new Date(1E3*b.values[1]);$("#intervalle").html(h(c)+" - "+h(d))},change:function(e,d){$("#geoloc-slider").slider("disable");$("#emptyied_bins_indic").remove();$("#collection_time_indic").remove();$("#total_distance_indic").remove();$("#average_speed_indic").remove();$("#max_speed_indic").remove();$("#used_fuel_indic").remove();var f=new Date(1E3*d.values[0]),k=new Date(1E3*d.values[1]);c=$("#start-timestamp").val()+" "+h(f);b=$("#start-timestamp").val()+" "+h(k);
FaunTrackingModule.get.truckPath(c,b,a);FaunTrackingModule.get.totalDistance(c,b,a);FaunTrackingModule.get.maxSpeed(c,b,a);FaunTrackingModule.get.averageSpeed(c,b,a);FaunTrackingModule.get.collectionTime(c,b,a);FaunTrackingModule.get.emptyiedBins(c,b,a);FaunTrackingModule.get.usedFuel(c,b,a);setTimeout(function(){$("#geoloc-slider").slider("enable")},1E3)}});FaunTrackingModule.get.truckPath(c,b,a);FaunTrackingModule.get.totalDistance(c,b,a);FaunTrackingModule.get.maxSpeed(c,b,a);FaunTrackingModule.get.averageSpeed(c,
b,a);FaunTrackingModule.get.collectionTime(c,b,a);FaunTrackingModule.get.emptyiedBins(c,b,a);FaunTrackingModule.get.usedFuel(c,b,a);$("#start-timestamp").on("change",function(){$("#loadingDiv").show();setTimeout(function(){$("#loadingDiv").fadeOut(200,function(){$("#loadingDiv").hide()})},2E3);var e=$("#selectVehicleIdx").val(),d=JSON.parse(localStorage.truckList);for(d.index=0;d.index<d.length;d.index++)e==d[d.index].rcv_number&&(a=d[d.index].vehicle_id);localStorage.selectedVehicletab=JSON.stringify({name:e,
id:a});$("#emptyied_bins_indic").remove();$("#collection_time_indic").remove();$("#total_distance_indic").remove();$("#average_speed_indic").remove();$("#max_speed_indic").remove();$("#used_fuel_indic").remove();FaunTrackingModule.get.truckPath(c,b,a);FaunTrackingModule.get.totalDistance(c,b,a);FaunTrackingModule.get.maxSpeed(c,b,a);FaunTrackingModule.get.averageSpeed(c,b,a);FaunTrackingModule.get.collectionTime(c,b,a);FaunTrackingModule.get.emptyiedBins(c,b,a);FaunTrackingModule.get.usedFuel(c,b,
a)});$("#selectVehicleIdx").change(function(){$("#loadingDiv").show();setTimeout(function(){$("#loadingDiv").fadeOut(200,function(){$("#loadingDiv").hide()})},2E3);var e=$("#selectVehicleIdx").val(),d=JSON.parse(localStorage.truckList);for(d.index=0;d.index<d.length;d.index++)e==d[d.index].rcv_number&&(a=d[d.index].vehicle_id);localStorage.selectedVehicletab=JSON.stringify({name:e,id:a});$("#emptyied_bins_indic").remove();$("#collection_time_indic").remove();$("#total_distance_indic").remove();$("#average_speed_indic").remove();
$("#max_speed_indic").remove();$("#used_fuel_indic").remove();FaunTrackingModule.get.truckPath(c,b,a);FaunTrackingModule.get.totalDistance(c,b,a);FaunTrackingModule.get.maxSpeed(c,b,a);FaunTrackingModule.get.averageSpeed(c,b,a);FaunTrackingModule.get.collectionTime(c,b,a);FaunTrackingModule.get.emptyiedBins(c,b,a);FaunTrackingModule.get.usedFuel(c,b,a)});$("#divChart").remove()});